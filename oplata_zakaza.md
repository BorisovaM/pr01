# Сценарий использования «Оплата заказа»

**Цель:** Добавить способ оплаты, чтобы оплатить заказ сейчас или позже.

**Акторы:** Клиент, Система, Платежная система

**Предусловие:** выполнен **пункт 7** основного сценария «Адресация  заказа»

**Основной поток:**

1. Система открывает страницу оформления способа оплаты
2. Клиент выбирает способ оплаты картой на сайте
3. Система открывает поля для ввода данных карты
4. Система устанавливает привязку карты к личному кабинету
5. Клиент вводит данные карты
6. Система отображает введенные данные
7. Клиент подтверждает заказ
8. Система передает данные заказа в платежную систему для оплаты
9. Система выполняет переход на страницу Платежной системы
10. Платежная система отправляет код подтверждения по sms
11. Клиент вводит код подтверждения оплаты и подтверждает его
12. Платежная система передает факт оплаты в Систему
13. Система открывает страницу с подтверждением оформления заказа
14. Система отправляет клиенту сообщение, что заказ принят, по sms
15. Система передает данные заказа в доставку

Альтернативный поток:

2. Клиент выбирает способ оплаты наличными
3. Система выделяет выбранный способ оплаты
4. Клиент подтверждает заказ
5. Возврат на шаг 13 основного сценария

Исключение 1. Недостаточно денег на карте:

12. Платежная система выдает сообщение об ошибке

Исключение 2. Неправильный код подтверждения оплаты:

12. Платежная система выдает сообщение об ошибке
